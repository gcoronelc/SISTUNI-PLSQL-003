CREATE OR REPLACE PROCEDURE SCOTT.SP_EXCEP_04
(CODIGO EMP.EMPNO%TYPE, SALARIO EMP.SAL%TYPE)
IS  
  EXCEP1 EXCEPTION;
  V_COD NUMBER := NULL;
BEGIN

  UPDATE EMP
  SET SAL = SALARIO
  WHERE EMPNO = CODIGO
  RETURNING EMPNO INTO V_COD;
  
  IF(V_COD IS NULL)THEN
    RAISE EXCEP1;
  END IF;
	  
  COMMIT;
  dbms_output.put_line( 'PROCESO OK');
  
EXCEPTION 
  WHEN EXCEP1 THEN
    ROLLBACK;
    dbms_output.put_line( 'CODIGO NO EXISTE');
END;

SET SERVEROUTPUT ON
CALL SCOTT.UPDATESALEMP2(9999,5000);